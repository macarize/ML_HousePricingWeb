<!DOCTYPE html>
<html>
<head>
	<title>RE</title>
	{% load staticfiles %}
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="{% static "\css\Hover.css" %}">
	<link rel="stylesheet" type="text/css" href="{% static "\css\Load.css" %}">
	<link rel="stylesheet" type="text/css" href="{% static "\css\Elements.css" %}">
	<link rel="stylesheet" type="text/css" href="{% static "\css\LogIn.css" %}">
	<style type="text/css">
		html, body {
		margin :0;
		padding: 0;
	    background:url({% static "introBackground.svg" %}) no-repeat fixed;
	    background-size: cover;
		}
		body::-webkit-scrollbar {
    		display: none;
		}
	</style>
	<style type="text/css">
	    .hvr-shrink {
	    display: inline-block;
	    vertical-align: middle;
	    -webkit-transform: perspective(1px) translateZ(0);
	    transform: perspective(1px) translateZ(0);
	    box-shadow: 0 0 1px rgba(0, 0, 0, 0);
	    -webkit-transition-duration: 0.3s;
	    transition-duration: 0.3s;
	    -webkit-transition-property: transform;
	    transition-property: transform;
		}
		.hvr-shrink:hover, .hvr-shrink:focus, .hvr-shrink:active {
	    -webkit-transform: scale(0.9);
	    transform: scale(0.9);
		}
	</style>
	<style>
		@font-face {
	    font-family: NanumSquare;
	    src: url({% static "NanumSquare_acB.ttf" %});
		}
		@font-face {
	    font-family: Agency;
	    src: url({% static "AgencyFB-Bold.ttf" %});
		}
		.LoginHead {
			font-family: Agency;
			font-size: 5vh;
			color : black;
		}
		.signIn {
			position: absolute;
			top: 28vh;
			font-family: NanumSquare;
			font-size: 2vh;
			color : black;
			text-align: left;
			line-height: 1vh;
		}
	</style>
</head>
<body>
	<div class='wrapper'>
		<div><img class='Pentagon rotate-15-cw' src="{% static "\Resource\AI\Intro\SVG\Asset_2.svg" %}"></div>
		<a href='#' id="ajaxlogout"><img class='Logout1' src="{% static "\Resource\AI\Intro\SVG\Asset_20.svg" %}"></a>
		<div><img class='Penta_Upper' src="{% static "\Resource\AI\Intro\SVG\Asset_3.svg" %}"></div>
		<div><img class='Pic1 hvr-shrink zoomIn' src="{% static "\Resource\AI\Intro\SVG\Asset_5.png" %}"></div>
		<div><img class='Pic2 hvr-shrink zoomIn' src="{% static "\Resource\AI\Intro\SVG\Asset_6.png" %}"></div>
		<div><img class='Pic3 hvr-shrink zoomIn' src="{% static "\Resource\AI\Intro\SVG\Asset_7.png" %}"></div>
		<div><img class='Logo1' src="{% static "\Resource\AI\Intro\SVG\Asset_8.png" %}"></div>
		<div><img class='Triangle hvr-buzz-out' src="{% static "\Resource\AI\Intro\SVG\Asset_10.svg" %}"></div>
		<div><img class='Busan slide-bottom' src="{% static "\Resource\AI\Intro\SVG\Asset_11.svg" %}"></div>
		<div><img class='Daegu slide-top' src="{% static "\Resource\AI\Intro\SVG\Asset_12.svg" %}"></div>
		<div><img class='Ulsan slide-bottom' src="{% static "\Resource\AI\Intro\SVG\Asset_13.svg" %}"></div>
		<div><img class='Seoul slide-top' src="{% static "\Resource\AI\Intro\SVG\Asset_14.svg" %}"></div>
		<div><img class='Incheon slide-bottom' src="{% static "\Resource\AI\Intro\SVG\Asset_15.svg" %}"></div>
		<div><img class='Gwangju slide-top' src="{% static "\Resource\AI\Intro\SVG\Asset_16.svg" %}"></div>
		<div><img class='Daejeon slide-bottom' src="{% static "\Resource\AI\Intro\SVG\Asset_17.svg" %}"></div>
		<div><img class='Intro_title' src="{% static "\Resource\AI\Intro\SVG\Asset_18.svg" %}"></div>
	</div>
<div class="container"> <!-- Trigger the modal with a button -->
  <a href="#loginModal" role="button" data-toggle="modal">
  <img class=Login1 src="{% static "\Resource\AI\Intro\SVG\Asset_9.svg" %}"></a>
</div>
</button>

<!-- 로그인 모달 -->
  <div class="modal modal-center fade" id="loginModal" role="dialog">
    <div class="modal-dialog modal-center">
      <div class="modal-content">
          <div class="modal-body">
            <div class="GO X" data-dismiss="modal">X</div>
            <div class="LoginHead">LOGIN</div>
			<form method="POST">
				{% csrf_token %}
				<input class="LoginBody" type="text" id="id" placeholder="ID">
				<input class="LoginBody" type="password" id="pw" placeholder="PASSWORD">
				<a href='#signupModal' role="button" data-toggle="modal"><div class="signIn">계정이 없으세요?</div></a>
				<div class="GO"><button class="GO" type="button" id="ajaxlogin">GO</button></div>
			</form>
          </div>
      </div>
    </div>
  </div>
	<!-- 회원가입 모달 -->
	<div class="modal modal-center fade" id="signupModal" role="dialog">
    <div class="modal-dialog modal-center">
      <div class="modal-content">
          <div class="modal-body">
            <div class="GO X" data-dismiss="modal">X</div>
            <div class="LoginHead">SIGNUP</div>
			<form method="POST">
				{% csrf_token %}
				<input class="LoginBody" type="text" id="id1" placeholder="ID">
				<input class="LoginBody" type="text" id="pw1" placeholder="PASSWORD">
				<input class="LoginBody" type="text" id="pw2" placeholder="PASSWORD CHECK">
				<input class="LoginBody" type="text" id="name" placeholder="NAME">
				<input class="LoginBody" type="text" id="phone" placeholder="PHONE">
				<div class="GO"><button class="GO" type="button" id="signup">GO</button></div>
			</form>
          </div>
      </div>
    </div>
  </div>
</body>
</html>


<script>
	console.log($('#login', parent.frames["consultant"].document).val());
	//login ajax
	$('#ajaxlogin').click(function(){
		var id = $('#id').val()
		var pw = $('#pw').val()

		$.ajax({
			type:'POST',
			url:'login',
			data:{
				'id':id,
				'pw':pw
			},
			dataType:'json',
			success:function(result){
				console.log(result.login)
				if(result.login != null){
					$('#loginModal').modal('hide');
					$('.Login1').css("display", "none");
					$('.Login2', parent.frames["consultant"].document).css("display", "none");
					$('.Login3', parent.frames["Results"].document).css("display", "none");
					$('.Login4', parent.frames["Seller"].document).css("display", "none");
					$('.Logout1').css("display", "block");
					$('.Logout2', parent.frames["consultant"].document).css("display", "block");
					$('.Logout2', parent.frames["consultant"].document).css("z-index", "1");
					$('.Logout3', parent.frames["Results"].document).css("display", "block");
					$('.Logout4', parent.frames["Seller"].document).css("display", "block");

					$('#login', parent.frames["consultant"].document).val(result.login)
				}else{
					alert('Login Fail')
				}
			}
		})
	})

	//signup modal
	$('#signupModal').click(function(){
		$('#loginModal').modal('hide');
	})

	//SignUp ajax
	$('#signup').click(function(){
		if($('#pw1').val() == $('#pw2').val()){
			var id = $('#id1').val()
			var pw = $('#pw1').val()
			var name = $('#name').val()
			var phone = $('#phone').val()
			$.ajax({
				type:'POST',
				url:'signup',
				data:{
					'id':id,
					'pw':pw,
					'name':name,
					'phone':phone
				},
				dataType:'json',
				success:function(result){
					console.log("signup success")
					$('#signupModal').modal('hide');
				}
			})
		}else{
			alert('비밀번호가 일치하지 않습니다')
		}
	})

	//logout ajax
	$('#ajaxlogout').click(function(){
			if($('#login', parent.frames["consultant"].document).val() != null){
				$.ajax({
					type:'POST',
					url:'logout',
					data:{
					},
					dataType:'json',
					success:function(result){
						$('.Login1').css("display", "block");
						$('.Login2', parent.frames["consultant"].document).css("display", "block");
						$('.Login3', parent.frames["Results"].document).css("display", "block");
						$('.Login4', parent.frames["Seller"].document).css("display", "block");
						$('.Logout1').css("display", "none");
						$('.Logout2', parent.frames["consultant"].document).css("display", "none");
						$('.Logout3', parent.frames["Results"].document).css("display", "none");
						$('.Logout4', parent.frames["Seller"].document).css("display", "none");

						$('#login', parent.frames["consultant"].document).val('nologin')
					}
				})
		}else{
			alert('Login Fail')
		}
	})

	//login check
	$(document).ready(function(){
		if($('#login', parent.frames["consultant"].document).val() != 'nologin'){
			$('.Login1').css("display", "none");
			$('.Login2', parent.frames["consultant"].document).css("display", "none");
			$('.Login3', parent.frames["Results"].document).css("display", "none");
			$('.Login4', parent.frames["Seller"].document).css("display", "none");
			$('.Logout1').css("display", "block");
			$('.Logout2', parent.frames["consultant"].document).css("display", "block");
			$('.Logout2', parent.frames["consultant"].document).css("z-index", "1");
			$('.Logout3', parent.frames["Results"].document).css("display", "block");
			$('.Logout4', parent.frames["Seller"].document).css("display", "block");
		}
	})

</script>
