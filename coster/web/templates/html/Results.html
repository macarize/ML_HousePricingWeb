<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
<head>
	<title></title>
	{% load staticfiles %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

	<link rel="stylesheet" type="text/css" href="{% static "\css\LogIn.css" %}">
	<link rel="stylesheet" type="text/css" href="{% static "\css\Elements3.css" %}">
	<style type="text/css">
		html, body {
		margin :0;
		padding: 0;
	    background:url({% static "ResultsBackground.svg" %}) no-repeat fixed;
	    background-size: cover;
		}
	</style>
	<style type="text/css">
		@font-face {
	    font-family: Agency;
	    src: url({% static "AgencyFB-Bold.ttf" %});
		}
		@font-face {
	    font-family: Nanum;
	    src: url({% static "NanumSquare_acB.ttf" %});
		}
	</style>
	<style type="text/css">
		.LoginHead {
			font-family: Agency;
			font-size: 5vh;
			color : black;
		}
		.readonlyBox {
			font-family: Nanum;
			font-size: 5vh;
			color : white;
			text-align: center;
		}
	</style>
</head>
<body>
	<a href='#' id="ajaxlogout"><img class='Logout3' src="{% static "\Resource\AI\Seller\SVG\Asset_6.svg" %}"></a>
	<div><img class='RBox' src="{% static "\Resource\AI\Results\SVG\Asset_3.svg" %}"></div>
	<div><img class='RTitle' src="{% static "\Resource\AI\Results\SVG\Asset_4.svg" %}"></div>
	<div><img class='LogoW' src="{% static "\Resource\AI\Results\SVG\Asset_6.png" %}"></div>
	<div><input class='readonlyBox' type="text" name="resoults" value="{{result}}" readonly></div>
	<div class='suggestion'><a href='#'>나에게 꼭 맞는 중계소 찾기</a></div>
	<div class="container"> <!-- Trigger the modal with a button -->
	  <a href="#loginModal" role="button" data-toggle="modal">
	  <img class=Login3 src="{% static "\Resource\AI\Results\SVG\Asset_5.svg" %}"></a>
	</div>
	</button>
	<!-- 로그인 모달 -->
	  <div class="modal modal-center fade" id="loginModal" role="dialog">
	    <div class="modal-dialog modal-center">
	      <div class="modal-content">
	          <div class="modal-body">
	            <div class="GO X" data-dismiss="modal">X</div>
	            <div class="LoginHead">LOGIN</div>
				<form method="POST">
					{% csrf_token %}
					<input class="LoginBody" type="text" id="id" placeholder="ID">
					<input class="LoginBody" type="password" id="pw" placeholder="PASSWORD">
					<a href='#'><div class="signIn">계정이 없으세요?</div></a>
					<div class="GO"><button class="GO" type="button" id="ajaxlogin">GO</button></div>
				</form>
	          </div>
	      </div>
	    </div>
	  </div>

		<!-- 회원가입 모달 -->
		<div class="modal modal-center fade" id="signupModal" role="dialog">
	    <div class="modal-dialog modal-center">
	      <div class="modal-content">
	          <div class="modal-body">
	            <div class="GO X" data-dismiss="modal">X</div>
	            <div class="LoginHead">SIGNUP</div>
				<form method="POST">
					{% csrf_token %}
					<input class="LoginBody" type="text" id="id1" placeholder="ID">
					<input class="LoginBody" type="text" id="pw1" placeholder="PASSWORD">
					<input class="LoginBody" type="text" id="pw2" placeholder="PASSWORD CHECK">
					<input class="LoginBody" type="text" id="name" placeholder="NAME">
					<input class="LoginBody" type="text" id="phone" placeholder="PHONE">
					<div class="GO"><button class="GO" type="button" id="signup">GO</button></div>
				</form>
	          </div>
	      </div>
	    </div>
	  </div>
</body>
</html>

<script>
	//login ajax
	$('#ajaxlogin').click(function(){
		var id = $('#id').val()
		var pw = $('#pw').val()

		$.ajax({
			type:'POST',
			url:'login',
			data:{
				'id':id,
				'pw':pw
			},
			dataType:'json',
			success:function(result){
				console.log(result.login)
				if(result.login != null){
					$('#loginModal').modal('hide');
					$('.Login1', parent.frames["intro"].document).css("display", "none");
					$('.Login2', parent.frames["consultant"].document).css("display", "none");
					$('.Login3').css("display", "none");
					$('.Login4', parent.frames["Seller"].document).css("display", "none");
					$('.Logout1', parent.frames["intro"].document).css("display", "block");
					$('.Logout2', parent.frames["consultant"].document).css("display", "block");
					$('.Logout2', parent.frames["consultant"].document).css("z-index", "1");
					$('.Logout3').css("display", "block");
					$('.Logout4', parent.frames["Seller"].document).css("display", "block");

					$('#login', parent.frames["consultant"].document).val(result.login)
				}else{
					alert('Login Fail')
				}
			}
		})
	})

	//signup modal
	$('#signupModal').click(function(){
		$('#loginModal').modal('hide');
	})

	//SignUp ajax
	$('#signup').click(function(){
		if($('#pw1').val() == $('#pw2').val()){
			var id = $('#id1').val()
			var pw = $('#pw1').val()
			var name = $('#name').val()
			var phone = $('#phone').val()
			$.ajax({
				type:'POST',
				url:'signup',
				data:{
					'id':id,
					'pw':pw,
					'name':name,
					'phone':phone
				},
				dataType:'json',
				success:function(result){
					console.log("signup success")
					$('#signupModal').modal('hide');
				}
			})
		}else{
			alert('비밀번호가 일치하지 않습니다')
		}
	})

	//logout ajax
	$('#ajaxlogout').click(function(){
			if('{{login}}' != null){
				$.ajax({
					type:'POST',
					url:'logout',
					data:{
					},
					dataType:'json',
					success:function(result){
							$('.Login1', parent.frames["intro"].document).css("display", "block");
							$('.Login2', parent.frames["consultant"].document).css("display", "block");
							$('.Login3').css("display", "block");
							$('.Login4', parent.frames["Seller"].document).css("display", "block");
							$('.Logout1', parent.frames["intro"].document).css("display", "none");
							$('.Logout2', parent.frames["consultant"].document).css("display", "none");
							$('.Logout3').css("display", "none");
							$('.Logout4', parent.frames["Seller"].document).css("display", "none");

							$('#login', parent.frames["consultant"].document).val('nologin')
					}
				})
			}else{
				alert('Login Fail')
			}
	})
</script>
